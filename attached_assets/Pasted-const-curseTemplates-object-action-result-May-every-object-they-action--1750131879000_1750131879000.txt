const curseTemplates = [
  ({ object, action, result }) =>
    `May every ${object} they ${action} turn into ${result}.`,
  ({ action, result }) =>
    `Whenever they ${action}, they hear the sound of ${result}.`,
  ({ bodyPart, result }) =>
    `May their ${bodyPart} develop an uncontrollable craving for ${result}.`,
  ({ objectPlural, absurdity }) =>
    `May ${objectPlural} follow them, whispering secrets about ${absurdity}.`,
  ({ result }) =>
    `May they forever smell faintly of ${result}, no matter how hard they scrub.`,
];

const curseTargets = [
  "your old gym teacher",
  "your middle school nemesis",
  "that one barista who judged you",
  "your exâ€™s new partner",
  "the cousin who ruined game night",
  "someone who calls you 'buddy' in a condescending tone",
  "your least favorite coworker",
  "an influencer who faked a haunting",
  "your unfinished tax return",
  "a guy named Chad (he knows what he did)",
];

const sideEffects = [
  "Also, mild goat noises.",
  "And yet, still somehow smug.",
  "Now banned from using elevators.",
  "They must explain NFTs at every party.",
  "Everything tastes faintly like pennies.",
  "Uncontrollable kazoo solos under pressure.",
  "Their phone autocorrects to embarrassing typos.",
  "Haunted by the scent of ham.",
  "They cry whenever they hear a kazoo.",
  "Pants slightly tighter every Tuesday.",
];

// Wordbanks
const wordbanks = {
  object: ["shoelace", "sandwich", "text message", "door handle", "thought"],
  objectPlural: ["clocks", "plastic lawn gnomes", "sentient loofahs", "ants"],
  action: ["touch", "eat", "clean", "tie", "whisper to"],
  result: ["live worms", "wet socks", "expired mayo", "glitter vomit", "tiny bees"],
  absurdity: ["ancient cheese politics", "your browser history", "haunted fonts"],
  bodyPart: ["elbow", "left nostril", "knee", "pinky toe", "eyelid"],
};

export function generateCurse() {
  const template =
    curseTemplates[Math.floor(Math.random() * curseTemplates.length)];

  const data = {
    object: rand(wordbanks.object),
    objectPlural: rand(wordbanks.objectPlural),
    action: rand(wordbanks.action),
    result: rand(wordbanks.result),
    absurdity: rand(wordbanks.absurdity),
    bodyPart: rand(wordbanks.bodyPart),
  };

  const curseText = template(data);
  const target = `Target: ${rand(curseTargets)}`;
  const sideEffect = rand(sideEffects);

  return {
    curseText,
    target,
    sideEffect,
  };
}

function rand(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}
